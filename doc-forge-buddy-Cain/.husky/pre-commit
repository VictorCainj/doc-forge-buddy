#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Pre-commit hook para qualidade de cÃ³digo
echo "ğŸ” Executando pre-commit hooks para qualidade de cÃ³digo..."

# Verificar se o Node.js estÃ¡ disponÃ­vel
if ! command -v node >/dev/null 2>&1; then
    echo "âŒ Node.js nÃ£o encontrado. Instale o Node.js para usar os pre-commit hooks."
    exit 1
fi

# Verificar se o lint-staged estÃ¡ disponÃ­vel
if ! command -v npx >/dev/null 2>&1; then
    echo "âŒ npx nÃ£o encontrado. Instale o Node.js/npm para usar os pre-commit hooks."
    exit 1
fi

# Executar lint-staged (configurado no package.json)
echo "ğŸ”§ Executando lint-staged..."
npx lint-staged

# Verificar se houve erro
if [ $? -ne 0 ]; then
    echo "âŒ Pre-commit hook falhou! Corrija os erros antes de fazer o commit."
    exit 1
fi

echo "âœ… Pre-commit hooks executados com sucesso!"
exit 0